<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en"><head>



<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="http://www.nongnu.org/elyxer/">
<meta name="create-date" content="2010-06-18">
<link rel="stylesheet" href="api_files/lyx.css" type="text/css" 
media="screen">
<title>Converted document</title>
</head><body>
<div id="globalWrapper">

<h1 class="Section-">
<a class="toc" name="toc-Section*-1"></a>/objects
</h1>
<div class="List">
<span class="List-entry">GET</span>Accept: *, authd - Returns an HTML 
page listing the ’silos’ your account can see
</div>
<div class="List">
<span class="List-entry">POST,PUT,DELETE</span>NOOP
</div>
<h1 class="Section-">
<a class="toc" name="toc-Section*-2"></a>/objects/{silo name}
</h1>
<div class="List">
<span class="List-entry">GET</span>Accept:text/html - Returns an HTML 
page listing the ids, along with a form for item creation
</div>
<div class="List">
<span class="List-entry">GET</span>Accept: text/plain, application/json -
 Returns a JSON-encoded hash/dict, keys map to exising item ids, and 
include embargo information
</div>
<div class="List">
<span class="List-entry">POST</span>Create new object
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Parameters</span>-&gt; id = {id to create}, 
embargoed = {true|false}, embargoed_until = {ISO8601 date}, 
title={(Optional)}
</div>
<div class="List">
<span class="List-entry">Returns:</span>Accept:text/html - 302 to splash
 page for newly created object, 201 otherwise on success. Code 409 if 
object already exists.
</div>
</li>
</ul>
<div class="List">
<span class="List-entry">PUT,DELETE</span>NOOP
</div>
<h1 class="Section-">
<a class="toc" name="toc-Section*-3"></a>/objects/{silo name}/{id}
</h1>
<div class="List">
<span class="List-entry">GET</span>Accept: text/html - returns HTML 
splash page for item <i>id</i>
</div>
<div class="List">
<span class="List-entry">GET</span>Accept: application/json - returns 
item’s JSON-encoded state
</div>
<div class="List">
<span class="List-entry">GET</span>Accept: application/rdf+xml, text/xml
 - returns item’s RDF manifest as RDF/XML
</div>
<div class="List">
<span class="List-entry">GET</span>Accept: text/rdf+n3 - returns item’s 
RDF manifest as N3
</div>
<div class="List">
<span class="List-entry">GET</span>Accept: application/x-turtle - 
returns item’s RDF manifest as Turtle
</div>
<div class="List">
<span class="List-entry">GET</span>Accept: text/rdf+ntriples, 
text/rdf+nt - returns item’s RDF manifest as ntriples
</div>
<div class="List">
<span class="List-entry">POST</span>If Item <i>id</i> <b>doesn’t</b> 
exist, create it. (As POST /objects/{silo} id=...)
</div>
<div class="List">
<span class="List-entry">POST</span>Item <i>id</i> <b>does</b> exist:
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Embargo-control</span>Change embargo 
information on item <i>id</i>
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Parameters</span>-&gt; embargo_change = true, 
embargoed = {true|false}, embargoed_until = {ISO8601 date}
</div>
<div class="List">
<span class="List-entry">Returns:</span>JSON-encoded statement of new 
embargo information with a 200 on success.
</div>
</li>
</ul>
<div class="List">
<span class="List-entry">File-upload:</span>Upload file to root 
directory (makes HTML forms easier)
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Parameters</span>-&gt; file = Multipart-encoded
 (HTML) file upload, filename = {Optional filename for upload}
</div>
<div class="List">
<span class="List-entry">Returns:</span>Accept: text/html - 302 redirect
 to top-level item view on success
</div>
<div class="List">
<span class="List-entry">Returns:</span>Accept: * - 200/201 on 
update/creation of file with <i>filename</i> 403 if filename == existing
 subdirectory name. (For the sake of web UI)
</div>
</li>
</ul>
<div class="List">
<span class="List-entry">Text-upload</span>Convenience function for HTML
 to update/create text files
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Parameters</span>-&gt; text = {UTF text to 
store}, filename = {desired filename}
</div>
<div class="List">
<span class="List-entry">Returns:</span>As File upload, but with the 
following changes: if ’filename’ isn’t set, 406 error will result. If 
filename == ’manifest.rdf’, and the text isn’t valid RDF/XML, again, 406
 will result.
</div>
</li>
</ul>
</li>
</ul>
<div class="List">
<span class="List-entry">DELETE</span>Deletes the item <i>id</i> - 200 
on success, 404 if <i>id</i> doesn’t exist
</div>
<div class="List">
<span class="List-entry">PUT</span>NOOP
</div>
<h1 class="Section-">
<a class="toc" name="toc-Section*-4"></a>/objects/{silo 
name}/{id}/{subpath}
</h1>
<div class="List">
<span class="List-entry">GET</span>Accept: text/html - HTML page listing
 the files within a given subpath
</div>
<div class="List">
<span class="List-entry">GET</span>Accept: text/plain, application/json -
 JSON-encoded listing of files {’parts’: { ’filename’: {python os.stat 
results}, ...} with ’readme_text’ being a potential top-level key-value 
pair
</div>
<div class="List">
<span class="List-entry">PUT</span>results in a 403 - cannot put content
 onto an existing directory
</div>
<div class="List">
<span class="List-entry">POST</span>Upload a file within the subpath
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Parameters</span>-&gt; file = Multipart-encoded
 (HTML) file upload, filename = {Optional <i>filename</i> for upload}
</div>
<div class="List">
<span class="List-entry">Returns:</span>Accept: * - 200/201 on 
update/creation of file with <i>filename</i> 403 if filename == existing
 subdirectory name. (For the sake of web UI)
</div>
</li>
</ul>
<div class="List">
<span class="List-entry">DELETE</span>TODO - recursive delete. Returns 
400 if the directory has subdirectories but this is not intended to be a
 long-term API choice.
</div>
<h1 class="Section-">
<a class="toc" name="toc-Section*-5"></a>/objects/{silo 
name}/{id}[/{subpath}]/{filename}
</h1>
<div class="List">
<span class="List-entry">GET</span>GETs the file at 
[/{subpath}]/{filename}, 404 otherwise
</div>
<div class="List">
<span class="List-entry">PUT</span>PUTs the request body in the place of
 the [/subpath]/filename, whether it already exists or not.
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Returns</span>200/201 for update/creation
</div>
</li>
</ul>
<div class="List">
<span class="List-entry">POST</span>Upload a file within the same 
subpath as the file (HTML convenience)
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Parameters</span>-&gt; file = Multipart-encoded
 (HTML) file upload, filename = {Optional <i>filename</i> for upload}
</div>
<div class="List">
<span class="List-entry">Returns:</span>Accept: * - 200/201 on 
update/creation of file with <i>filename</i> 403 if filename == existing
 subdirectory name. (For the sake of web UI)
</div>
</li>
</ul>
<div class="List">
<span class="List-entry">DELETE</span>Removes the filename from the item
 and subpath.
</div>
<ul>

<li class="nested">

<div class="List">
<span class="List-entry">Returns:</span>200 on success.
</div>
</li>
</ul>

</div>
</body></html>