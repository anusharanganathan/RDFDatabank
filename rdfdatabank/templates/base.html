# -*- coding: utf-8 -*-
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>  
  ${ h.stylesheet_link( '/style.css' ) }
  ${ h.javascript_link( '/jquery.js' ) }
  ${self.head_tags()}
  <script type="text/javascript">
  $(document).ready( function() {

  $('a.delete').click( function() {
    var theAnchor = this;
    if ( confirm('Are you sure you want to delete this?' ) )
      $.ajax({
        type: 'DELETE',
        url: $(this).attr('href'),
        dataType: 'json',
        success: function() {
            var toRemove = $(theAnchor).attr('data-remove');
            $("#" + toRemove).remove();
        },
        error: function (XMLHttpRequest, textStatus, errorThrown) {
          alert("Ooooops!, request failed with status: " + XMLHttpRequest.status + ' ' + XMLHttpRequest.responseText);
        }
      });
    return false;
  });
});
  </script>
  </head>
  <body>
    <div id="wrapper">
      <div id="header">
      <%include file="/header.html"/>
% if c.silo_name:
<h1> <a href="/silos">Silos</a> - <a href="/${c.silo_name}/datasets">${c.silo_name}</a> </h1>
% else:
<h1> <a href="/silos">Silos</a> </h1>
% endif
      </div>
      <div id="widecontent">      
% if c.ident and c.ident['role'] == "admin":
<div id="admin">
<p><a href="/admin">Admin pages</a>
%   if c.silo_name:
<a href="/admin/${c.silo_name}">Admin ${c.silo_name}</a>
%   endif
</p>
</div>
% endif
% if c.id:
%   if c.path:
<h2> Subdirectory <a href="/${c.silo_name}/datasets/${c.id}/${c.path}">${c.id}/${c.path}</a></h2>
<h3> Root directory: <a href="/${c.silo_name}/datasets/${c.id}">${c.id}</a> </h3>
%   else:
<h2> Root directory of <a href="/${c.silo_name}/datasets/${c.id}">${c.id}</a> </h2>
%   endif
% endif
    ${self.body()}
      </div>
      <div id="footer">
      <%include file="/footer.html"/>
      </div>
    </div>
  </body>
</html>