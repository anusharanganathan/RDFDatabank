<%namespace name="options" file="/search_response_options.html" />
##=============================================================================
## Current search options
${options.currentsearch()}
##=============================================================================
## Pagination and sort options
% if c.numFound and c.numFound > 0:
<div class="searchtop">
  ${options.pagination()}
  ${options.sortoptions()}
</div>
% endif
##=============================================================================
## Number of records, current span of records and items per page
<div class="searchtop">

<div class="searchleft">
${ c.numFound} records found.
</div>

% if c.numFound > 0:
<div class='searchmid'>Showing results ${c.start+1} to 
%   if (c.start+c.rows) > c.numFound:
${c.numFound}
%   else:
${c.start+c.rows}
%   endif
</div>
% endif

% if c.numFound > 0:
${options.numresultspp("itemsppt")}
% endif

</div>
##=============================================================================
##Link to these results
% if c.docs and c.add_facet:
<div id="link_to_this_search">Link to these search results | 
<a href="${c.add_facet}&format=html&sort=${c.sort}&rows=${c.rows}&start=${c.start}">
  <img src="/static/styles/images/link.png" border="0" alt="HTML" /> This page'</a>
<a href="${c.add_facet}&format=csv&sort=${c.sort}&rows=${c.rows}&start=${c.start}">
  <img src="/static/styles/images/csv.png" border="0" alt="CSV Logo" /> CSV</a>
<a href="${c.add_facet}&format=json&sort=${c.sort}&rows=${c.rows}&start=${c.start}">
  <img src="/static/styles/images/json.png" border="0" alt="JSON Logo" />JSON</a>
</div>
% endif
##=============================================================================
##Search results
% if c.docs:
<div class="clear">&nbsp;</div>

%   for doc_index in xrange(len(c.docs)):
<div class="response_doc">
<div class="silotitle"><a href="/${c.docs[doc_index]['silo']}/datasets/${c.docs[doc_index]['id']}">${c.docs[doc_index]['id']}</a></div>
<dt>Silo </dt><dd>${c.docs[doc_index]['silo']}</dd>
%     for field in c.chosen_fields:
%       if field in c.docs[doc_index] and field not in ['silo', 'id']:
<% 
lbl = field
if field in c.field_names:
    lbl = c.field_names[field]
%>
<dt>${lbl}</dt><dd>
%         if isinstance(c.docs[doc_index][field], list):
%           for txt in c.docs[doc_index][field]:
%             if isinstance(txt, basestring) and c.truncate and len(txt) > c.truncate:
${ txt[:c.truncate] |n} ...
%             elif isinstance(txt, int) or isinstance(txt, bool):
${str(txt)}
%             else:
${txt |n}
%             endif
%           endfor
%         elif isinstance(c.docs[doc_index][field], basestring) and c.truncate and len(c.docs[doc_index][field]) > c.truncate:
${ c.docs[doc_index][field][:c.truncate] |n} ...
%         elif isinstance(c.docs[doc_index][field], int) or isinstance(c.docs[doc_index][field], bool):
${str(c.docs[doc_index][field])}
%         else:
${c.docs[doc_index][field] |n}
%         endif
</dd>
%       endif
%     endfor
</div>
<div class="clear"></div>
%   endfor
% endif 
##=============================================================================
## Pagination and sort options
%if c.numFound and c.numFound > 0:
<div class="searchbottom">
  ${options.pagination()}
  ${options.sortoptions()}
</div>
% endif
##=============================================================================
## Number of records, current record start and end and items per page
%if c.numFound and c.numFound > 0:
<div class="searchbottom">

<div class="searchleft">
${ c.numFound} records found.
</div>

% if c.numFound > 0:
<div class='searchmid'>Showing results ${c.start+1} to 
%   if (c.start+c.rows) > c.numFound:
${c.numFound}</div>
%   else:
${c.start+c.rows}</div>
%   endif
% endif

% if c.numFound > 0:
${options.numresultspp("itemsppb")}
% endif

</div>
% endif
##=============================================================================
<div class="clear"></div>


