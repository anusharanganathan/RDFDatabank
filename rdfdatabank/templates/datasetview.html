# -*- coding: utf-8 -*-
<%inherit file="/base.html" />
<%def name="head_tags()">
  <link rel="meta" type="application/rdf+xml" title="RDF Manifest"
               href="/${c.silo_name}/datasets/${c.id}/manifest.rdf"/>
  <title> Dataset ${c.id} </title>
</%def>

<%
c.current = c.id
%>

<h1>Dataset ${c.id}</h1>

<!-- Embargo Information -->
% if c.embargos:
<h3><b>Embargo Information</b></h3>
%   if c.embargos[c.current][0] not in ['False', 'false', 0, False]:
<p>Embargoed: True</p>
<p>Embargoed until: ${c.embargos[c.current][1]}</p>
%   else:
<p>Embargoed: False</p>
%   endif
% endif

<!-- View Information -->
% if c.editor:
  <div id="editor_view">
  % if c.view == 'editor':
    Editor view 
  % else:
    User view 
  % endif
  % if c.version: 
    <br /> Change view : 
    <a href="/${c.silo_name}/datasets/${c.id}?version=${c.version}&view=editor">Editor</a> | 
    <a href="/${c.silo_name}/datasets/${c.id}?version=${c.version}&view=user">User</a></p>
  % else:
    <br />Change view : 
    <a href="/${c.silo_name}/datasets/${c.id}?view=editor">Editor</a> | 
    <a href="/${c.silo_name}/datasets/${c.id}?view=user">User</a></p>
  % endif
  </div>
% endif

<div class="datapackage">
% if c.version:
  <h3>Information for version ${c.version} of the dataset</h3>
% endif
<!--
<dl>
 <dt>Item's JSON state (Accept: application/json):</dt>
<dd>${repr(c.item)}</dd> 
-->

<!-- List of Files -->
% if c.show_files:
  % if c.editor:
    <%include file="/part_list.html"/>
  % else:
    <%include file="/part_list_display.html"/>
  % endif
% endif

<!-- Read Me Information -->
% if c.readme_text:
<%include file="/readme_section.html"/>
% endif

<!-- RDF Manifest -->
<dl>
<dt><b>Item's RDF Manifest (Accept: most RDF mimetypes):</b></dt>
<dd><pre>${c.manifest_pretty}</pre></dd>
</dl>

</div>

<!-- DISPLAYED FOR EDITOR ONLY -->
<!-- State Information -->
% if c.editor:
  <div class="editor">
  <p><b><a href="/${c.silo_name}/states/${c.id}">View state information</a></b></p>
  % if c.view == 'editor':
    <dl>
    <!-- Change Embargo Information -->
    <dt><b>Change Embargo</b></dt>
    <dd>
    <%include file="/embargo_form.html"/>
    <p><small>Embargo state: True - only those logged in and with edit rights can see item. False - Anyone can GET the item and it's files.</small></p>
    <p><small>Embargo date: Aim is for ISO8601 dates to provide embargo trigger events. Currently unused, unvalidated and unparsed.</small></p>
    </dd>
    <!-- Change RDF Manifest -->
    <dt><b>Change RDF Manifest:</b></dt>
    <dd><%include file="/rdf_manifest_form.html"/></dd>
    </dl>
    <!-- Upload File -->
    <%include file="/file_upload.html"/>
    <!-- Unpack zipfiles -->
    % if c.zipfiles:
      <h3> List of item unpack endpoints:</h3>
      <ul class="unpack_endpoints">
      % for zf in c.zipfiles:
        <%
        c.zipfile = zf
        c.newid = c.zipfiles[zf]
        %>
       <li><%include file="/files_unpack.html"/></li>
      % endfor
      </ul>
    % endif
  % endif
  </div>
% endif

