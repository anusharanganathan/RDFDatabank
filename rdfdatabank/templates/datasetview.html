# -*- coding: utf-8 -*-
<%inherit file="/base.html" />
<%def name="head_tags()">
  <link rel="meta" type="application/rdf+xml" title="RDF Manifest"
               href="/${c.silo_name}/datasets/${c.id}/manifest.rdf"/>
  <title> Dataset ${c.id} </title>
</%def>

<%
c.current = c.id
%>

<h1>Dataset ${c.id}</h1>
<div id="editor_metadata_view">
<!-- View Information -->

<h2>
% if c.editor:

%   if c.view == 'editor':
Editor view
%   else:
user view

%   endif
</h2>
%   if c.version: 
<p>Change view : <a href="/${c.silo_name}/datasets/${c.id}/version${c.version}?view=editor">Editor</a> | <a href="/${c.silo_name}/datasets/${c.id}/version${c.version}?view=user">User</a></p>
%   else:
<p>Change view : as <a href="/${c.silo_name}/datasets/${c.id}?view=editor">Editor</a> | <a href="/${c.silo_name}/datasets/${c.id}?view=user">User</a></p>
%   endif
%endif

<!--
<dl>
 <dt>Item's JSON state (Accept: application/json):</dt>
<dd>${repr(c.item)}</dd> 
-->

<!-- List of Files -->
<dl>
% if c.editor: 
<%include file="/part_list.html"/>
% elif c.embargos[c.current][0] in ['False', 'false', 0, False]:
<%include file="/part_list_display.html"/>
% endif
</dl>

<!-- Read Me Information -->
% if c.readme_text:
<%include file="/readme_section.html"/>
% endif

<!-- Embargo Information -->
<dl>
% if c.embargos:
<dt>Embargo Information</dt>
%   if c.embargos[c.current][0] not in ['False', 'false', 0, False]:
<dd>Embargoed: True</dd>
<dd>Embargoed until: ${c.embargos[c.current][1]}</dd>
%   else:
<dd>Embargoed: False</dd>
%   endif
% endif
</dl>

<!-- RDF Manifest -->
<dl>
<dt>Item's RDF Manifest (Accept: most RDF mimetypes):</dt>
<dd><pre>${c.manifest_pretty}</pre></dd>
</dl>

<!-- DISPLAYED FOR EDITOR ONLY -->
<!-- State Information -->
% if c.editor:
<p><a href="/${c.silo_name}/states/${c.id}">View state information</a></p>
<!-- Change Embargo Information -->
% if c.view == 'editor':
<dl>
<dt>Change Embargo</dt>
<dd>
<%include file="/embargo_form.html"/>
<p><small>Embargo state: True - only those logged in and with edit rights can see item. False - Anyone can GET the item and it's files.</small></p>
<p><small>Embargo date: Aim is for ISO8601 dates to provide embargo trigger events. Currently unused, unvalidated and unparsed.</small></p>
</dd>
<!-- Change RDF Manifest -->
<dt>Add metadata to the RDF Manifest</dt>
<dd><%include file="/rdf_manifest_form.html"/></dd>
</dl>
<!-- Upload File -->
<%include file="/file_upload.html"/>
<!-- Unpack zipfiles -->
%   if c.zipfiles:
<h2> List of item unpack endpoints:</h2>
<ul class="unpack_endpoints">
%     for zf in c.zipfiles:
<%
c.zipfile = zf
c.newid = c.zipfiles[zf]
%>
<li><%include file="/files_unpack.html"/></li>
%     endfor
</ul>
%   endif
% endif
% endif
</div>
