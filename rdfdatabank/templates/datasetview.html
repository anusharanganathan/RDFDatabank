# -*- coding: utf-8 -*-
<%inherit file="/base.html" />
<%def name="head_tags()">
  <link rel="meta" type="application/rdf+xml" title="RDF Manifest"
               href="/${c.silo_name}/datasets/${c.id}/manifest.rdf"/>
  <title> Dataset ${c.id} </title>
</%def>
<h1>Dataset ${c.id}</h1>
% if c.editor:
<p>View as <a href="/${c.silo_name}/datasets/${c.id}?view=editor"> Editor </a>, or <a href="/${c.silo_name}/datasets/${c.id}?view=user">User</a></p>
% endif
% if c.readme_text:
<%include file="/readme_section.html"/>
% endif
<%include file="/part_list.html"/>
% if c.item and c.view == "editor":
<div id="editor_metadata_view">
<p> Detailed view (As Editor)
<p><b><a href="/${c.silo_name}/states/${c.id}">View state information</a></b></p>
<dl>
<!--
 <dt>Item's JSON state (Accept: application/json):</dt>
<dd>${repr(c.item)}</dd> 
-->
<dt><b>Item's Embargo state</b></dt>
<dd>
<%
c.current = c.id
%>
<p><%include file="/embargo_form.html"/></p>
<p><small>Embargo state: True - only those logged in and with edit rights can see item. False - Anyone can GET the item and it's files.</small></p>
<p><small>Embargo date: Aim is for ISO8601 dates to provide embargo trigger events. Currently unused, unvalidated and unparsed.</small></p></dd>
<dt><b>Item's RDF Manifest (Accept: most RDF mimetypes):</b></dt>
<dd><pre>${c.item.rdf_to_string(format="pretty-xml")}</pre></dd>

<dt><b>Change RDF Manifest:</b></dt>
<dd><%include file="/rdf_manifest_form.html"/></dd>
</dl>
</div>
<%include file="/file_upload.html"/>
% if c.zipfiles:
<h3> List of item unpack endpoints:</h3>
<ul>
% for zf in c.zipfiles:
<%
c.zipfile = zf
c.newid = c.zipfiles[zf]
%>
<li><p><a href="/${c.silo_name}/datasets/${c.item_id}/${zf}">${zf}</a> :
<%include file="/files_unpack.html"/></p>
</li>
% endfor
</ul>
% endif

% endif
